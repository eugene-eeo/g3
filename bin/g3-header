#!/usr/bin/env python

import sys
from pathlib import Path


def main(path):
    path = Path(path)
    if path.suffix != '.md':
        return

    dst = Path('_g3/tmp') / path.parent / (path.stem + '.header')
    dst.parent.mkdir(parents=True, exist_ok=True)
    with path.open('r') as r:
        with dst.open('w') as w:
            for line in r:
                if not line.strip():
                    break
                w.write(line)


if __name__ == '__main__':
    main(sys.argv[1])
